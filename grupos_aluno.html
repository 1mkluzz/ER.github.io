<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Discente- Grupos</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
       
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles_grupos.css" rel="stylesheet" />
    </head>
    <body id="page-top" onload = "onLoad()">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
          <a href="index.html" class="navbar-brand js-scroll-trigger" src="https://codingforspeed.com/wp-content/uploads/2018/11/laptop-coding-editor.jpg"><b>CODEMENT</b></a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav">                  
                    <li class="nav-item"><p><br></p></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">Sobre</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#IHC">IHC</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#ER">ER</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Redes">Redes</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#outracadeira">Outra cadeira</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#speech2text">Speech2text</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#notificacoes">Notificações</a></li>
                </ul>
            </div>
        </nav>

        <!-- Page Content-->
        <div class="container-fluid p-0">
          <!-- About-->
          <section class="resume-section" id="about">
            <div class="resume-section-content">
              <h1 class="mb-0">Aluno 1</h1>
              <div class="subheading mb-5">Info que deseja adicionar  <a href="filipe.quintal@staff.uma.pt">20xxx17@student.uma.pt</a></div>
              <p class="lead mb-5">informações necessárias</p>
              <div class="social-icons">
                <a class="social-icon" href="#"><i class="fab fa-linkedin-in"></i></a><a class="social-icon" href="#"><i class="fab fa-github"></i></a><a class="social-icon" href="#"><i class="fab fa-twitter"></i></a><a class="social-icon" href="#"><i class="fab fa-facebook-f"></i></a>
              </div>
            </div>
          </section>
          <hr class="m-0" />
          <!-- IHC-->
          <section class="resume-section" id="IHC">
            <div class="resume-section-content">
              <h2 class="mb-5">Interação Humano Computador</h2>
              <h3>Professor(a): Simone Ashby <a class="btn btn-primary" href="#" role="button"> Email</a></h3>
              <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                  <div class="flex-grow-1">
                    <br><h3 class="mb-0">Projeto 1</h3>
                    <div class="subheading mb-3">Data Limite: dia/mês/ano</div>
                    <p>O enunciado do projeto já se encontra disponível no moodle. Lá podem encontrar todas as informações que necessitam e poderão contactar-me no caso de dúvidas</p>
                    <br><a class="btn btn-primary" href="#" role="button">Download</a>
                    <a class="btn btn-primary" href="#" role="button" >Upload</a>
                  </div>
                  <div class="flex-shrink-0"><span class="text-primary">publicado em: dia/mês/ano</span></div>
              </div>

              <br><br>
              <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                  <div class="flex-grow-1">
                      <h3 class="mb-0">Projeto 2</h3>
                      <div class="subheading mb-3">Data Limite: dia/mês/ano</div>
                      <p>O enunciado do projeto ainda não foi publicado.</p>
                  </div>
                <div class="flex-shrink-0"><span class="text-primary">publicado em: dia/mês/ano</span></div>
            </div>

            <!-- EVENTOS IHC -->
            <div class="resume-section-content">
              <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                  <!-- <h3 class="mb-0">Eventos</h3> -->
                  <p id = "eventos_ihc"></p>
                </div>
          </div>


            </div>
          
             

        </section>
          
          <hr class="m-0" />
            <!-- ER-->
            <section class="resume-section" id="ER">
              <div class="resume-section-content">
                <h2 class="mb-5">Engenharia de Requisitos</h2>
                <h3>Professor(a): Filipe Quintal <a class="btn btn-primary" href="#" role="button"> Email</a><p></br></p></h3>
                <!-- ER entrega 1-->
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                  <div class="flex-grow-1">
                      <h3 class="mb-0">Dúvidas</h3>                       
                      <p>Aqui podem submeter as vossas dúvidas.</p>
                    </div>
                  <div class="flex-shrink-0"><span class="text-primary">publicado em: dia/mês/ano</span></div>
              </div>
              <div id="accordion_criar_duvida_er">
                <div class="card_duvida">
                  <div class="card-header_duvida" id="card-header_duvida">
                    <h5 class="mb-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#criar_duvida" id = "botao_duvida" aria-expanded="true" aria-controls="collapseOne">
                        <strong> Criar</strong>
                      </button>
                    </h5>
                  </div>
                  <!-- criar duvida -->
                  <div id="criar_duvida" class="collapse" aria-labelledby="headingOne" data-parent="#accordion_criar_duvida_er">
                    <div class="card-body">
                      <form id="contactForm" name="sentMessage" novalidate="novalidate">
                        <div class="row justify-content-center">
                            <div class="col-sm-7">
                              <div class="form-group ">
                                <p></br>Este é o repositório onde vais introduzir as tuas dúvidas.</p>
                                  <input class="form-control" id="url_duvida_form" type="message" placeholder="URL do repositório *" required="required" data-validation-required-message="Introduza um URL." />
                                  <p class="help-block text-danger"></p>
                              </div>         
                              <div class="form-group ">
                                  <div id="success"></div>
                                  <button class="btn btn-dark btn-xl text-uppercase" id="botao_criar_grupo" onclick = "criarDuvida('ER','card-header_duvida')" type="submit">Criar</button>
                              </div>
                            </div>
                        </div>   
                        </form>
                  </div>
                </div>
              </div>
              <p id = "botoes_duvida"></p>
              <!-- Dúvidas -->
              <br><br>
              <div class="resume-section-content">
                  <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                        <h3 class="mb-0">Projeto - Entrega 1 - Finalizado</h3>                       
                        <div class="subheading mb-3">Data Limite: dia/mês/ano</div>
                        <p>O enunciado do projeto já se encontra disponível no moodle. Lá podem encontrar todas as informações que necessitam e poderão contactar-me no caso de dúvidas.</p>
                        <a class="btn btn-primary" href="#" role="button">Download</a>
                        <a class="btn btn-primary" href="#" role="button" >Upload</a>
                      </div>
                    <div class="flex-shrink-0"><span class="text-primary">publicado em: dia/mês/ano</span></div>
              </div>

              <!-- ER entrega 2-->    
              <br><br>
              <div class="resume-section-content">
                  <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                      <div class="flex-grow-1">
                        <h3 class="mb-0">Projeto - Entrega 2 - Finalizado</h3>
                        <div class="subheading mb-3">Data Limite: dia/mês/ano</div>
                        <p>O enunciado do projeto já se encontra disponível no moodle. Lá podem encontrar todas as informações que necessitam e poderão contactar-me no caso de dúvidas</p>
                        <a class="btn btn-primary" href="#" role="button">Download</a>
                        <a class="btn btn-primary" href="#" role="button" >Upload</a>
                      </div>
                    <div class="flex-shrink-0"><span class="text-primary">publicado em: dia/mês/ano</span></div>
              </div>
              <!-- ER entrega 3-->
              <br><br>
              <div class="resume-section-content">
                  <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                    <div class="flex-grow-1">
                      <h3 class="mb-0">Projeto - Entrega 3</h3>
                      <div class="subheading mb-3">Data Limite: dia/mês/ano</div>
                      <p>O enunciado do projeto já se encontra disponível no moodle. Lá podem encontrar todas as informações que necessitam e poderão contactar-me no caso de dúvidas</p>
                      <a class="btn btn-primary" href="#" role="button">Download</a>
                      <a class="btn btn-primary" href="#" role="button" >Upload</a>
                    </div>
                   <div class="flex-shrink-0"><span class="text-primary">publicado em: dia/mês/ano</span></div>
              </div>

              <!-- EVENTOS -->
            <div class="resume-section-content">
                <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                  <div class="flex-grow-1">
                    <!-- <h3 class="mb-0">Eventos</h3> -->
                    <p id = "eventos_er"></p>
                  </div>
            </div>

            </section>
            <hr class="m-0" />
            <!-- Redes-->
            <section class="resume-section" id="Redes">
                <div class="resume-section-content">
                    <h2 class="mb-5">Redes e Comunicação de Dados</h2>
                    <div class="subheading mb-3">Nenhum evento foi criado</div>
                    
                </div>
            </section>
            <hr class="m-0" />
            <!-- Outra Cadeira-->
            <section class="resume-section" id="outracadeira">
                <div class="resume-section-content">
                    <h2 class="mb-5">Outra cadeira</h2>
                    <div class="subheading mb-3">Nenhum evento foi criado</div>
                </div>
            </section>

            <hr class="m-0" />
             <!-- Speech to text-->
             <section class="resume-section" id="speech2text">
              <div class="resume-section-content">
                  <h2 class="mb-5">Speech to text</h2>
                  <h5> Aqui poderá deixar o seu comentário de aúdio</h5>
                  <!-- Button trigger modal -->
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
                    Colocar dúvida
                  </button>
                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLongTitle">
                          <div id='gUMArea'>
                            <div>
                              Deseja gravar: </h5>
                              <br>
                                <input type="radio" name="media" value="video" checked id='mediaVideo'> Webcam e áudio
                                <input type="radio" name="media" value="audio">Áudio
                            </div>
                            <div class="modal-footer">
                              <button class="btn btn-primary" data-dismiss="modal" data-toggle="modal" data-target="#exampleModalCenter2" id='gUMbtn'>Gravar</button>
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  

                  <!-- Modal -->
                  <div class="modal fade" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLongTitle">Grave o seu aúdio </h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div> 
                        <br>
                        <p> Cliquem em <strong> começar </strong> para gravar e em <strong> finalizar </strong> quando acabar a gravação </p>             
                        <div class="modal-footer">
                          <div id='btns'>
                            <button class="btn btn-primary" id='start'>Começar </button>&nbsp;&nbsp;
                            <button  class="btn btn-danger" id='stop'>Finalizar</button>
                          </div>

                        </div>
                        <div class="modal-body">
                            <div>
                            <ul  class="list-unstyled" id='ul'></ul>
                          </div>
                        </div>
                        <main>
                          <div id="result"></div>
                          <p id="message" hidden aria-hidden="true">
                              Your browser doesn't support Speech Recognition. Sorry.
                          </p>
                      </main>
                      </div>
                    </div>
                  </div>    
              </div>
          </section>


            <hr class="m-0" />
            <!-- Notificaçoes-->
            <section class="resume-section" id="notificacoes">
                <div class="resume-section-content">
                    <h2 class="mb-5">Notificações</h2>
                    <p> Aqui poderá ver o se todas o estado de revisões por cadeira. Poderão estar todos os projetos revistos, ou não.</p>
                    <ul class="fa-ul mb-0">
                        <li>
                            <span class="fa-li"><i class="fas fa-check"></i></span>Interação Humano Computador
                        </li>
                        <li>
                            <span class="fa-li"><i class="fas"></i></span>Engenharia de Requisitos
                        </li>
                        <li>
                            <span class="fa-li"><i class="fas fa-check"></i></span>Redes e Comunicação de Dados
                        </li>
                        <li>
                            <span class="fa-li"><i class="fas fa-check"></i></span>Outra cadeira
                        </li>
                    </ul>
                </div>
            </section>
        </div>
      

    <!-- Bootstrap core JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts_grupo.js"></script>
     <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
    <!-- speech to text -->
    <script src="js/recorder.js"></script>

    <script>

      function onLoad() {
          if (sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer") != null) {
                sessionStorage.removeItem("IsThisFirstTime_Log_From_LiveServer");
          }
          if (sessionStorage.length == 0){
              window.location.href = "login.html";
              return;
          }
          if (localStorage.eventos != null){
            var text_er = "";
            var text_ihc = "";
            var data = JSON.parse(localStorage.eventos);
            
            var eventos = document.getElementById("eventos_er");
            var eventos_ihc = document.getElementById("eventos_ihc");

            // eventos.innerHTML = "";
            // eventos_ihc.innerHTML = "";
            
            for (i = 0; i < data.length; i++){
              if (data[i]["disciplina"] == "ER"){
                  var disciplina = data[i]["disciplina"];
                  var nome = data[i]["nome"];
                  var datalimite = data[i]["data"];
                  var message = data[i]["message"];
                  
                  text_er += "<h3 class='mb-0'>" + nome + "</h3><br><div class='subheading mb-3'>Data Limite: "+ datalimite + "</div>" +  message + "<br><br><a class='btn btn-primary' href='#' role='button'>Download </a>&nbsp<a class='btn btn-primary' href='#' role='button' >Upload</a> <a class='btn btn-primary' href='#' role='button'>Email</a><div class='flex-shrink-0'><span class='text-primary'>publicado em: dia/mês/ano</span></div><br><br><br>";
                  
              }

              else if (data[i]["disciplina"] == "IHC"){
                  var disciplina = data[i]["disciplina"];
                  var nome = data[i]["nome"];
                  var datalimite = data[i]["data"];
                  var message = data[i]["message"];
                  
                  text_ihc += "<h3 class='mb-0'>" + nome + "</h3><br><div class='subheading mb-3'>Data Limite: "+ datalimite + "</div>" +  message + "<br><br><a class='btn btn-primary' href='#' role='button'>Download </a>&nbsp<a class='btn btn-primary' href='#' role='button'  >Upload</a> <a class='btn btn-primary' href='#' role='button'>Email</a><div class='flex-shrink-0'><span class='text-primary'>publicado em: dia/mês/ano</span></div><br><br><br>";
                  
              }
            }
            eventos.innerHTML += text_er;
            eventos_ihc.innerHTML += text_ihc;
          }


          if (localStorage.duvidas != null){
            var data_duvidas= JSON.parse(localStorage.duvidas);
            
            console.log(data_duvidas[0]["esconder"]);
            var x = document.getElementById("card-header_duvida");
            x.style.display = "none";
            var p =  document.getElementById("botoes_duvida");
            p.innerHTML = "<p></br>Utiliza estes botões para esclarecer dúvidas com o docente.</p><a class='btn btn-primary' href='" + data_duvidas[0]['url'] +"/archive/master.zip' role='button'>Download</a>&nbsp<a class='btn btn-primary' href='" + data_duvidas[0]['url'] +"/upload/master' role='button' target='_blank' >Upload</a>";
          }
          else if (localStorage.duvidas == null){
            var x = document.getElementById("card-header_duvida");
            x.style.display ="block";
            var p =  document.getElementById("botoes_duvida");
            p.innerHTML = "";
          }
            
      }


        function criarDuvida(cadeira, esconder){
              var duvidas;
              var data_login = JSON.parse(sessionStorage.users);
              var username = data_login[0]["email"];

              if(!localStorage.duvidas) { duvidas = []; }
              else {
                duvidas = JSON.parse(localStorage.duvidas);
              }

              if($("#url").val()!= ""){
                  var currentEvent = {
                  "cadeira" : cadeira,
                  "url" : $("#url_duvida_form").val(),
                  "aluno" : username,
                  "esconder" : esconder,
              };

              duvidas.push(currentEvent);
              
              try {            
                  localStorage.duvidas = JSON.stringify(duvidas); 
                  window.alert("Criado com sucesso!");
                  location.reload();
                  
                  //return true;          
              }
              catch (e) {
                  if (e == QUOTA_EXCEEDED_ERR) {
                  alert('Quota exceeded!');
                  window.alert("Sem espaço para criar!");
                  }   
                }
              }
              
            }

            /// javascript speech2text
            window.addEventListener("DOMContentLoaded", () => {
            const button = document.getElementById("start");
            const button_fechar = document.getElementById("stop");
            const result = document.getElementById("result");
            const main = document.getElementsByTagName("main")[0];
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition
            if (typeof SpeechRecognition === "undefined") {
                button.remove();
                const message = document.getElementById("message");
                message.removeAttribute("hidden");
                message.setAttribute("aria-hidden", "false");
            } else {
                let listening = false;
                const recognition = new SpeechRecognition();
                const start = () => {
                    recognition.start();
                   // button.textContent = "Começar";
                    main.classList.add("speaking");
                };
                const stop = () => {
                    recognition.stop();
                  // button.textContent = "Começar";
                    main.classList.remove("speaking");
                };
                const onResult = event => {
                    result.innerHTML = "";
                    for (const res of event.results) {
                        const text = document.createTextNode(res[0].transcript);
                        const p = document.createElement("p");
                        p.setAttribute("id","result_final");
                        if (res.isFinal) {
                        p.classList.add("final");
                        }
                        p.appendChild(text);
                        result.appendChild(p);
                    }
                }
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.addEventListener("result", onResult);

                button.addEventListener("click", () => {
                    start();
                });
                button_fechar.addEventListener("click", () => {
                    stop();
                });
            }
          });

    </script>

    </body>


</html>
